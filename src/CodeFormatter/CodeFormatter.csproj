<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="12.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <ProjectGuid>{B0E1A988-F762-459D-AD0D-56A3CF4FFF3F}</ProjectGuid>
    <OutputType>Exe</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>CodeFormatter</RootNamespace>
    <AssemblyName>CodeFormatter</AssemblyName>
    <IncludeRoslyn>true</IncludeRoslyn>
    <IncludeMSBuild>true</IncludeMSBuild>
  </PropertyGroup>
  <Import Project="..\..\build.props" />
  <!-- Default configurations to help VS understand -->
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' " />
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' " />
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System.Data" />
    <Reference Include="System.Xml" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="CommandLineParser.cs" />
    <Compile Include="Program.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
  </ItemGroup>
  <ItemGroup>
    <Content Include="CopyrightHeader.md">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
    <Content Include="IllegalHeaders.md">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
  </ItemGroup>
  <ItemGroup>
    <None Include="App.config" />
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\Microsoft.DotNet.CodeFormatting\Microsoft.DotNet.CodeFormatting.csproj">
      <Project>{D535641F-A2D7-481C-930D-96C02F052B95}</Project>
      <Name>Microsoft.DotNet.CodeFormatting</Name>
    </ProjectReference>
  </ItemGroup>
  <ItemGroup />
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
  <Target Name="CopyMSBuildForMono" AfterTargets="AfterBuild" Condition=" '$(OS)' == 'Unix' ">
    <ItemGroup>
      <_CopyItems Include="..\ExternalApis\msbuild\*.*" />
    </ItemGroup>
    <Copy SourceFiles="@(_CopyItems)" DestinationFolder="$(TargetDir)\msbuild" />
  </Target>
  <Target Name="AfterClean" Condition=" '$(OS)' == 'Unix' ">
    <ItemGroup>
      <LocalMonoMSBuild Include="$(TargetDir)\msbuild" />
    </ItemGroup>
    <RemoveDir Directories="@(LocalMonoMSBuild)" />
  </Target>
  <Target Name="CopyLocalMSBuild" AfterTargets="ResolveAssemblyReferences">
    <ItemGroup>
      <ReferencePath Update="@(ReferencePath)" Condition="$([MSBuild]::ValueOrDefault('%(FileName)', '').StartsWith('Microsoft.Build'))">
        <CopyLocal>true</CopyLocal>
      </ReferencePath>
    </ItemGroup>
  </Target>
</Project>